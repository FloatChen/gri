<html>
<head>
<title>example-vertical.gri</title>
</head>
<body>
<pre>
`setup seawifs colorscale'
{
    # Formula to convert chlorophyll (C) to 'image' value (V):
    #     V = [2 + log(C)] / 3.699
    # transformation, C values ranging from 0.01 to 64 map, 
    # logarithmically, into the V range 0 to 1.

    set image range 0 1
    open <u>"gawk '{print($1/255,$2/255,$3/255)}' seawifs.palette |"</u>
    read image colorscale rgb
    close
}

# Vertical palette
`palette label .value'
{
    # Tics
    .x0. = .px0.
    .y0. = {rpn \.word2. log 2 + 3.699 / .py1. .py0. - * .py0. +} 
    .x1. = {rpn .px0. <u>"M"</u> ascent 0.5 * -}
    .y1. = {rpn \.word2. log 2 + 3.699 / .py1. .py0. - * .py0. +}
    draw line from .x0. .y0. to .x1. .y1. cm

    # Numbers
    draw label  <u>"\.word2."</u> centered at \
	{rpn .x0. <u>"M"</u> width 2 * -} \
	{rpn .y0. <u>"M"</u> ascent 2 / -} cm
}

`draw seawifs palette .x_ll_cm. .y_ll_cm. .x_ur_cm. .y_ur.cm.'
{
    set font size 0
    set tic size 0
    .px0. = \.word3.
    .py0. = \.word4.
    .px1. = \.word5.
    .py1. = \.word6.

    draw image palette axisright box .px0. .py0. .px1. .py1.
    set font size 5
    palette label <u>".01"</u>
    palette label <u>".02"</u>
    palette label <u>".03"</u>
    palette label  <u>".02"</u>
    palette label  <u>".03"</u>
    palette label  <u>".05"</u>
    palette label  <u>".1"</u>
    palette label  <u>".2"</u>
    palette label  <u>".3"</u>
    palette label  <u>".5"</u>
    palette label  <u>"1"</u>
    palette label  <u>"2"</u>
    palette label  <u>"3"</u>
    palette label  <u>"5"</u>
    palette label <u>"10"</u>
    palette label <u>"15"</u>
    palette label <u>"20"</u>
    palette label <u>"30"</u>
    palette label <u>"50"</u>

    set font size 8
    draw label <u>"Chlorophyll a Concentration, mg/m$^3$"</u> centered at \
	{rpn .px0. .px1. + 2 /} {rpn .py0. <u>"M"</u> ascent 5 * -} cm
    set tic size 0.1
}

    .
    .
    .

draw seawifs palette 20 4 20.3 8

    .
    .
    .
</pre>
</body>
</html>
